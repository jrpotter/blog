<html><!--
 Page saved with SingleFile 
 url: https://downloads.haskell.org/~ghc/7.6.3/docs/html/users_guide/equality-constraints.html 
 saved date: Tue Jan 09 2024 15:37:40 GMT-0700 (Mountain Standard Time)
--><meta charset=utf-8><title>7.10.&nbsp;Equality constraints</title><meta name=generator content="DocBook XSL Stylesheets V1.75.2"><link rel=canonical href=https://downloads.haskell.org/~ghc/7.6.3/docs/html/users_guide/equality-constraints.html><meta http-equiv=content-security-policy content="default-src 'none'; font-src 'self' data:; img-src 'self' data:; style-src 'unsafe-inline'; media-src 'self' data:; script-src 'unsafe-inline' data:; object-src 'self' data:; frame-src 'self' data:;"><style>img[src="data:,"],source[src="data:,"]{display:none!important}</style><body alink=#0000FF vlink=#840084 link=#0000FF text=black bgcolor=white><div style=display:none!important;position:static!important;top:0px!important;left:0px!important;width:0px!important;height:0px!important id=twoseven-scripts data-info="Scripts added by TwoSeven extension"></div><style>div{font-family:sans-serif;color:black;background:white}h2{color:#005A9C}h2{font:140%sans-serif}pre{font-family:monospace;border-width:1px;border-style:solid;padding:0.3em}pre.programlisting{color:maroon}a:link{color:#0000C8}a:hover{background:#FFFFA8}a:active{color:#D00000}a:visited{color:#680098}</style><link rel=home href=https://downloads.haskell.org/~ghc/7.6.3/docs/html/users_guide/index.html title="The Glorious Glasgow Haskell Compilation System User's Guide, Version 7.6.3"><link rel=up href=https://downloads.haskell.org/~ghc/7.6.3/docs/html/users_guide/ghc-language-features.html title="Chapter&nbsp;7.&nbsp;GHC Language Features"><link rel=prev href=https://downloads.haskell.org/~ghc/7.6.3/docs/html/users_guide/promotion.html title="7.9.&nbsp;Datatype promotion"><link rel=next href=https://downloads.haskell.org/~ghc/7.6.3/docs/html/users_guide/constraint-kind.html title="7.11.&nbsp;The Constraint kind"><style>.twoseven-ext-tab-media-modal{position:fixed;z-index:2147483638;left:0;top:0;width:100%;height:100%;overflow:auto;background-color:rgba(0,0,0,0.5)}</style><style>:is([id*="google_ads_iframe"],[id*="taboola-"],.taboolaHeight,.taboola-placeholder,#credential_picker_container,#credentials-picker-container,#credential_picker_iframe,[id*="google-one-tap-iframe"],#google-one-tap-popup-container,.google-one-tap-modal-div,#amp_floatingAdDiv,#ez-content-blocker-container){display:none!important;min-height:0!important;height:0!important}</style><div class=navheader><table width=100% summary="Navigation header"><tbody><tr><th colspan=3 align=center>7.10.&nbsp;Equality constraints<tr><td width=20% align=left><a accesskey=p href=https://downloads.haskell.org/~ghc/7.6.3/docs/html/users_guide/promotion.html>Prev</a>&nbsp;<th width=60% align=center>Chapter&nbsp;7.&nbsp;GHC Language Features<td width=20% align=right>&nbsp;<a accesskey=n href=https://downloads.haskell.org/~ghc/7.6.3/docs/html/users_guide/constraint-kind.html>Next</a></table><hr></div><div class=sect1 title="7.10.&nbsp;Equality constraints"><div class=titlepage><div><div><h2 class=title style=clear:both><a name=equality-constraints></a>7.10.&nbsp;Equality constraints</h2></div></div></div><p>
 A type context can include equality constraints of the form <code class=literal>t1 ~
 t2</code>, which denote that the types <code class=literal>t1</code>
 and <code class=literal>t2</code> need to be the same. In the presence of type
 families, whether two types are equal cannot generally be decided
 locally. Hence, the contexts of function signatures may include
 equality constraints, as in the following example:
<pre class=programlisting>sumCollects :: (Collects c1, Collects c2, Elem c1 ~ Elem c2) =&gt; c1 -&gt; c2 -&gt; c2
</pre><p>
 where we require that the element type of <code class=literal>c1</code>
 and <code class=literal>c2</code> are the same. In general, the
 types <code class=literal>t1</code> and <code class=literal>t2</code> of an equality
 constraint may be arbitrary monotypes; i.e., they may not contain any
 quantifiers, independent of whether higher-rank types are otherwise
 enabled.
 <p>
 Equality constraints can also appear in class and instance contexts.
 The former enable a simple translation of programs using functional
 dependencies into programs using family synonyms instead. The general
 idea is to rewrite a class declaration of the form
<pre class=programlisting>class C a b | a -&gt; b
</pre><p>
 to
<pre class=programlisting>class (F a ~ b) =&gt; C a b where
  type F a
</pre><p>
 That is, we represent every functional dependency (FD) <code class=literal>a1 .. an
 -&gt; b</code> by an FD type family <code class=literal>F a1 .. an</code> and a
 superclass context equality <code class=literal>F a1 .. an ~ b</code>,
 essentially giving a name to the functional dependency. In class
 instances, we define the type instances of FD families in accordance
 with the class head. Method signatures are not affected by that
 process.
 </p></div><div class=navfooter><hr><table width=100% summary="Navigation footer"><tbody><tr><td width=40% align=left><a accesskey=p href=https://downloads.haskell.org/~ghc/7.6.3/docs/html/users_guide/promotion.html>Prev</a>&nbsp;<td width=20% align=center><a accesskey=u href=https://downloads.haskell.org/~ghc/7.6.3/docs/html/users_guide/ghc-language-features.html>Up</a><td width=40% align=right>&nbsp;<a accesskey=n href=https://downloads.haskell.org/~ghc/7.6.3/docs/html/users_guide/constraint-kind.html>Next</a><tr><td width=40% align=left valign=top>7.9.&nbsp;Datatype promotion&nbsp;<td width=20% align=center><a accesskey=h href=https://downloads.haskell.org/~ghc/7.6.3/docs/html/users_guide/index.html>Home</a><td width=40% align=right valign=top>&nbsp;7.11.&nbsp;The <code class=literal>Constraint</code> kind</table></div>
<div>
 <div id=twoseven-ext-tab-media-modal class=twoseven-ext-tab-media-modal style=display:none>
 
 
 </div></div>